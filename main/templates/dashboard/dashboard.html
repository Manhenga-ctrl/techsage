{% extends "base.html" %}
{% block title %}Dashboard - HPE WiFi Portal{% endblock %}

{% block content %}
<h1>Dashboard</h1>



<style>
/* ===== VINTAGE EMERALD BACKGROUND ===== */
body {
    font-family: "Georgia", "Times New Roman", serif;
    background:
        radial-gradient(circle at top, #e6fffa, #cceee6),
        repeating-linear-gradient(
            45deg,
            rgba(0,0,0,0.02),
            rgba(0,0,0,0.02) 1px,
            transparent 1px,
            transparent 3px
        );
    color: #134e4a;
    padding: 20px;
}

/* ===== DASHBOARD CARDS ===== */
.cards {
    display: flex;
    flex-wrap: wrap;
    gap: 18px;
    margin-bottom: 24px;
}

.card {
    flex: 1 1 calc(33.33% - 12px);
    min-width: 200px;
    background: #f0fdfa;
    border: 2px solid #0f766e;
    border-radius: 8px;
    padding: 20px;
    box-shadow: inset 0 0 0 1px #ccfbf1, 0 6px 18px rgba(0,0,0,0.15);
    text-align: center;
    transition: transform 0.2s, box-shadow 0.2s;
}

.card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 24px rgba(0,0,0,0.25);
}

.card h2 {
    font-size: 22px;
    color: #065f46;
    margin-bottom: 6px;
    font-weight: bold;
}

.card p {
    font-size: 14px;
    color: #0f766e;
    font-style: italic;
}

/* ===== RECENT TRANSACTIONS TABLE ===== */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-family: "Courier New", monospace;
}

thead {
    background: #0f766e;
    color: #f0fdfa;
}

thead th {
    padding: 10px;
    text-align: left;
    font-weight: bold;
    border-bottom: 2px solid #065f46;
}

tbody td {
    padding: 10px;
    border-bottom: 1px dotted #065f46;
    color: #064e3b;
}

tbody tr:hover {
    background: #ccfbf1;
}

@media (max-width: 768px) {
    .cards {
        flex-direction: column;
    }
    
    .card {
        flex: 1 1 100%;
    }
    
    table, thead, tbody, th, td, tr {
        display: block;
    }
    
    thead tr {
        display: none;
    }
    
    tbody td {
        display: flex;
        justify-content: space-between;
        padding: 8px;
        border-bottom: 1px solid #065f46;
    }
    
    tbody td::before {
        content: attr(data-label);
        font-weight: bold;
        color: #0f766e;
    }
}
</style>

<!-- ===== Dashboard Cards ===== -->
<div class="cards">
    <div class="card">
        <h2>{{ total_transactions }}</h2>
        <p>Total Transactions</p>
    </div>

    <div class="card">
        <h2>${{ total_revenue }}</h2>
        <p>Total Revenue</p>
    </div>

    <div class="card">
        <h2>{{ successful_transactions }}</h2>
        <p>Successful Payments</p>
    </div>

    <div class="card">
        <h2>{{ failed_transactions }}</h2>
        <p>Failed Payments</p>
    </div>

    <div class="card">
        <h2>{{ total_vouchers }}</h2>
        <p>Total Vouchers</p>
    </div>

    <div class="card">
        <h2>{{ used_vouchers }} / {{ unused_vouchers }}</h2>
        <p>Used / Unused</p>
    </div>

    <div class="card">
        <h2>{{ total_packages }}</h2>
        <p>Packages</p>
    </div>
</div>

<!-- ===== Recent Transactions Table ===== -->
<table>
    <thead>
        <tr>
            <th>MSISDN</th>
            <th>Package</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        {% for tx in recent_transactions %}
        <tr>
            <td data-label="MSISDN">{{ tx.customer_msisdn }}</td>
            <td data-label="Package">{{ tx.package }}</td>
            <td data-label="Amount">{{ tx.amount }} {{ tx.currency }}</td>
            <td data-label="Status">{{ tx.status }}</td>
            <td data-label="Date">{{ tx.timestamp }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">No recent transactions found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
