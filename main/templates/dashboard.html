{% extends "base.html" %}
{% block title %}Dashboard - HPE WiFi Portal{% endblock %}

{% block content %}
<h1>Dashboard</h1>

<!-- ===== Dashboard Cards ===== -->
<div class="cards">
    <div class="card">
        <h2>{{ total_transactions }}</h2>
        <p>Total Transactions</p>
    </div>

    <div class="card">
        <h2>${{ total_revenue }}</h2>
        <p>Total Revenue</p>
    </div>

    <div class="card">
        <h2>{{ successful_transactions }}</h2>
        <p>Successful Payments</p>
    </div>

    <div class="card">
        <h2>{{ failed_transactions }}</h2>
        <p>Failed Payments</p>
    </div>

    <div class="card">
        <h2>{{ total_vouchers }}</h2>
        <p>Total Vouchers</p>
    </div>

    <div class="card">
        <h2>{{ used_vouchers }} / {{ unused_vouchers }}</h2>
        <p>Used / Unused</p>
    </div>

    <div class="card">
        <h2>{{ total_packages }}</h2>
        <p>Packages</p>
    </div>
</div>

<!-- ===== Recent Transactions Table ===== -->
<table>
    <thead>
        <tr>
            <th>MSISDN</th>
            <th>Package</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        {% for tx in recent_transactions %}
        <tr>
            <td data-label="MSISDN">{{ tx.customer_msisdn }}</td>
            <td data-label="Package">{{ tx.package }}</td>
            <td data-label="Amount">{{ tx.amount }} {{ tx.currency }}</td>
            <td data-label="Status">{{ tx.status }}</td>
            <td data-label="Date">{{ tx.timestamp }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">No recent transactions found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
